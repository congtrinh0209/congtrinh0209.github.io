(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f2d951a"],{"3a2f":function(t,e,n){"use strict";var i=n("ade3"),a=(n("a9e3"),n("9734"),n("4ad4")),o=n("a9ad"),s=n("16b7"),r=n("b848"),c=n("75eb"),l=n("f573"),d=n("f2e7"),u=n("80d2"),h=n("d9bd"),m=n("58df");e["a"]=Object(m["a"])(o["a"],s["a"],r["a"],c["a"],l["a"],d["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,n=t.content,i=!this.bottom&&!this.left&&!this.top&&!this.right,a=!1!==this.attach?e.offsetLeft:e.left,o=0;return this.top||this.bottom||i?o=a+e.width/2-n.width/2:(this.left||this.right)&&(o=a+(this.right?e.width:-n.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(o,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,n=t.content,i=!1!==this.attach?e.offsetTop:e.top,a=0;return this.top||this.bottom?a=i+(this.bottom?e.height:-n.height)+(this.bottom?10:-10):(this.left||this.right)&&(a=i+e.height/2-n.height/2),this.nudgeTop&&(a-=parseInt(this.nudgeTop)),this.nudgeBottom&&(a+=parseInt(this.nudgeBottom)),"".concat(this.calcYOverflow(a+this.pageYOffset),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(u["g"])(this.maxWidth),minWidth:Object(u["g"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(u["s"])(this,"activator",!0)&&Object(h["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=a["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===u["w"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(i["a"])(t,this.contentClass,!0),Object(i["a"])(t,"menuable__content__active",this.isActive),Object(i["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}})},"4bd4":function(t,e,n){"use strict";var i=n("5530"),a=(n("caad"),n("2532"),n("07ac"),n("4de4"),n("159b"),n("7db0"),n("58df")),o=n("7e2b"),s=n("3206");e["a"]=Object(a["a"])(o["a"],Object(s["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,n=function(t){return t.$watch("hasError",(function(n){e.$set(e.errorBag,t._uid,n)}),{immediate:!0})},i={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=n(t)))})):i.valid=n(t),i},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var n=this.watchers.find((function(t){return t._uid===e._uid}));n&&(n.valid(),n.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},9734:function(t,e,n){},b204:function(t,e,n){},c3b1:function(t,e,n){"use strict";n("b204")},da94:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{attrs:{id:"users",fluid:"",tag:"section"}},[n("base-material-card",{staticClass:"px-5 py-3",style:"lg"===t.breakpointName?"margin-top: 90px":"margin-top: 20px",attrs:{icon:"mdi-clipboard-text",title:"Danh sách nhân viên, đại lý bán hàng"}},[n("v-card-text",{class:"lg"!==t.breakpointName?"px-0":""},[n("div",{class:"xs"===t.breakpointName?"mb-3":"d-flex mb-3"},["xs"===t.breakpointName?n("div",{staticClass:"mr-auto pt-2 mb-3"},[t._v(" Tổng số: "),n("span",{staticStyle:{"font-weight":"bold",color:"green"}},[t._v(t._s(t.totalItem))]),t._v(" nhân viên, đại lý bán hàng ")]):n("span",{staticClass:"mr-auto pt-2"},[t._v(" Tổng số: "),n("span",{staticStyle:{"font-weight":"bold",color:"green"}},[t._v(t._s(t.totalItem))]),t._v(" nhân viên, đại lý bán hàng ")]),n("v-btn",{staticClass:"mx-0",attrs:{color:"success"},on:{click:function(e){return e.stopPropagation(),t.addMember("add")}}},[n("v-icon",{attrs:{left:"",size:"22"}},[t._v(" mdi-plus ")]),t._v(" Thêm nhân viên, đại lý ")],1)],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,page:t.page,"items-per-page":t.itemsPerPage,"hide-default-footer":"","no-data-text":"Không có nhân viên, đại lý bán hàng nào",loading:t.loadingData,"loading-text":"Đang tải... "},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.index",fn:function(e){e.item;var i=e.index;return[n("span",[t._v(t._s(i+1))])]}},{key:"item.role",fn:function(e){var i=e.item;return[i.hasOwnProperty("role")&&"Admin"===i.role?n("span",{staticStyle:{color:"red"}},[t._v("Quản trị")]):n("span",{staticStyle:{color:"blue"}},[t._v("nhân viên, đại lý bán hàng")])]}},{key:"item.action",fn:function(e){var i=e.item;return[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"blue",text:"",icon:""},on:{click:function(e){return t.addMember("update",i)}}},"v-btn",o,!1),a),[n("v-icon",{attrs:{size:"22"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[n("span",[t._v("Cập nhật thông tin")])])]}}])}),n("div",{staticClass:"text-center mt-4"},[n("v-pagination",{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1),n("v-dialog",{attrs:{"max-width":"600"},model:{value:t.dialogAddMember,callback:function(e){t.dialogAddMember=e},expression:"dialogAddMember"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},["add"===t.typeAction?n("v-toolbar-title",[t._v("Thêm nhân viên, đại lý bán hàng")]):n("v-toolbar-title",[t._v("Cập nhật thông tin")]),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.dialogAddMember=!1}}},[n("v-icon",[t._v("mdi-close")])],1)],1)],1),n("v-card-text",{staticClass:"mt-5"},[n("v-form",{ref:"formAddMember",attrs:{"lazy-validation":""},model:{value:t.validFormAdd,callback:function(e){t.validFormAdd=e},expression:"validFormAdd"}},["add"===t.typeAction?n("v-text-field",{attrs:{rules:t.accountRules,counter:75,required:"",outlined:"",label:"Tên đăng nhập","prepend-inner-icon":"mdi-account-check-outline",dense:"",clearable:""},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}}):t._e(),"add"===t.typeAction?n("v-text-field",{attrs:{rules:t.passwordRules,required:"",outlined:"",label:"Mật khẩu đăng nhập","prepend-inner-icon":"mdi-lock-check-outline",dense:"",clearable:""},model:{value:t.passWord,callback:function(e){t.passWord=e},expression:"passWord"}}):t._e(),n("v-text-field",{attrs:{rules:t.nameRules,required:"",outlined:"",counter:100,label:"Tên nhân viên, đại lý bán hàng","prepend-inner-icon":"mdi-card-account-details-outline",dense:"",clearable:""},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),n("v-text-field",{attrs:{rules:t.telNoRules,required:"",outlined:"",label:"Số điện thoại","prepend-inner-icon":"mdi-phone-in-talk-outline",dense:"",clearable:""},model:{value:t.telNo,callback:function(e){t.telNo=e},expression:"telNo"}}),n("v-text-field",{attrs:{rules:t.addressRules,counter:200,outlined:"",label:"Địa chỉ","prepend-inner-icon":"mdi-map-marker",dense:"",clearable:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{staticClass:"white--text mr-2",attrs:{color:"red",loading:t.loading,disabled:t.loading},on:{click:t.cancelAddMember}},[n("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" Thoát ")],1),n("v-btn",{staticClass:"mr-2",attrs:{color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.submitAddMember}},[n("v-icon",{attrs:{left:""}},[t._v(" mdi-content-save ")]),"add"===t.typeAction?n("span",[t._v("Thêm mới")]):n("span",[t._v("Cập nhật")])],1)],1)],1)],1)],1)],1)},a=[],o=(n("159b"),n("498a"),{name:"Users",data:function(){return{loading:!1,loadingData:!1,dialogAddMember:!1,totalItem:0,page:1,pageCount:0,itemsPerPage:5,typeAction:"",userUpdate:"",items:[],validFormAdd:!0,userName:"",nameRules:[function(t){return!!t||"Tên nhân viên, đại lý bán hàng là bắt buộc"},function(t){return t&&t.length<=100||"Tên không quá 100 ký tự"}],account:"",accountRules:[function(t){return!!t||"Tên đăng nhập là bắt buộc"},function(t){return/^[a-zA-Z0-9]+$/.test(t)||"Tên đăng nhập gồm chữ hoặc số"},function(t){return t&&t.length<=75||"Tên đăng nhập không quá 75 ký tự"}],passWord:"",passwordRules:[function(t){return!!t||"Mật khẩu đăng nhập là bắt buộc"},function(t){return t&&t.length>=6&&t.length<=20||"Mật khẩu ít nhất 6 ký tự"}],telNo:"",telNoRules:[function(t){return!!t||"Số điện thoại là bắt buộc"},function(t){return/^0([1-9]{1}\d{8})$/.test(t)||"Số điện thoại gồm 10 chữ số"}],address:"",addressRules:[function(t){return t&&t.length<=200||"Địa chỉ không quá 200 ký tự"}],headers:[{sortable:!1,text:"STT",align:"center",value:"index"},{sortable:!1,text:"Tên",align:"center",value:"userName"},{sortable:!1,text:"Tên đăng nhập",value:"account"},{sortable:!1,text:"Số điện thoại",align:"center",value:"telNo"},{sortable:!1,text:"Địa chỉ",align:"center",value:"address"},{sortable:!1,text:"Loại tài khoản",align:"center",value:"role"},{sortable:!1,text:"Thao tác",align:"center",value:"action"}]}},created:function(){var t=this;t.getMembers()},methods:{getMembers:function(){var t=this;t.loadingData=!0,db.collection("users").get().then((function(e){t.loadingData=!1;var n=[];e.size?(e.docs.forEach((function(t){n.push(t.data())})),t.items=n,console.log("memberList",t.items),t.totalItem=e.size,t.pageCount=Math.ceil(e.size/t.itemsPerPage)):t.items=[]})).catch((function(){t.loadingData=!1}))},addMember:function(t,e){var n=this;n.typeAction=t,n.userUpdate=e,n.dialogAddMember=!0,"add"===t?setTimeout((function(){n.account="",n.passWord="",n.userName="",n.telNo="",n.address="",n.$refs.formAddMember.resetValidation()}),200):setTimeout((function(){n.account=e.account,n.userName=e.userName,n.telNo=e.telNo,n.address=e.address,n.$refs.formAddMember.resetValidation()}),200)},updateStatusUser:function(t,e){var n=this;n.userUpdate=e},deleteUser:function(t){},submitAddMember:function(){var t=this;if(t.$refs.formAddMember.validate())if("add"===t.typeAction){var e={account:String(t.account).trim()+"@gmail.com",passWord:String(t.passWord).trim(),userName:String(t.userName).trim(),telNo:String(t.telNo).trim(),address:String(t.address).trim()};t.loading=!0;var n=firebase.auth().currentUser,i=n["uid"],a=db.collection("users").doc(i),o=n["email"],s="";a.get().then((function(t){t.exists&&(s=window.atob(t.data()["pid"]))})).catch((function(t){})),firebase.auth().createUserWithEmailAndPassword(e.account,e.passWord).then((function(n){t.loading=!1,t.$store.commit("SHOW_SNACKBAR",{show:!0,text:"Thêm nhân viên, đại lý bán hàng thành công",color:"success"}),t.dialogAddMember=!1,firebase.auth().signInWithEmailAndPassword(o,s).then((function(){var i=n.user;db.collection("users").doc(i.uid).set({account:String(t.account).trim(),userName:e.userName,telNo:e.telNo,address:e.address,role:"Member",status:"",uid:i.uid}).then((function(){t.getMembers()})).catch((function(t){}))}))})).catch((function(e){t.loading=!1;var n=e.code,i=e.message,a="";a="auth/email-already-in-use"==n?"Tên đăng nhập đã được sử dụng. Vui lòng sử dụng tên đăng nhập khác.":"auth/weak-password"==n?"Mật khẩu quá yếu":"auth/invalid-email"==n?"Tên đăng nhập không hợp lệ":i,t.$store.commit("SHOW_SNACKBAR",{show:!0,text:a,color:"error"})}))}else t.loading=!0,db.collection("users").doc(t.userUpdate["uid"]).update({userName:t.userName,telNo:t.telNo,address:t.address}).then((function(){t.loading=!1,t.$store.commit("SHOW_SNACKBAR",{show:!0,text:"Cập nhật thành công",color:"success"}),t.dialogAddMember=!1,t.getMembers()})).catch((function(){t.$store.commit("SHOW_SNACKBAR",{show:!0,text:"Cập nhật thất bại",color:"error"})}))},cancelAddMember:function(){var t=this;t.dialogAddMember=!1}}}),s=o,r=(n("c3b1"),n("2877")),c=n("6544"),l=n.n(c),d=n("8336"),u=n("b0af"),h=n("99d9"),m=n("a523"),f=n("8fea"),p=n("169a"),g=n("4bd4"),v=n("132d"),b=n("891e"),x=n("2fa4"),A=n("8654"),_=n("71d9"),k=n("2a7f"),y=n("3a2f"),w=Object(r["a"])(s,i,a,!1,null,"22494bde",null);e["default"]=w.exports;l()(w,{VBtn:d["a"],VCard:u["a"],VCardActions:h["a"],VCardText:h["b"],VContainer:m["a"],VDataTable:f["a"],VDialog:p["a"],VForm:g["a"],VIcon:v["a"],VPagination:b["a"],VSpacer:x["a"],VTextField:A["a"],VToolbar:_["a"],VToolbarItems:k["a"],VToolbarTitle:k["b"],VTooltip:y["a"]})}}]);
//# sourceMappingURL=chunk-6f2d951a.8c3b985e.js.map