(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eca2afa"],{"069d":function(t,a,e){"use strict";e("8c26")},"0fd9":function(t,a,e){"use strict";var n=e("ade3"),i=e("5530"),o=(e("caad"),e("2532"),e("99af"),e("b64b"),e("ac1f"),e("5319"),e("4ec9"),e("d3b7"),e("3ca3"),e("ddb0"),e("159b"),e("4b85"),e("2b0e")),r=e("d9f7"),c=e("80d2"),s=["sm","md","lg","xl"],l=["start","end","center"];function d(t,a){return s.reduce((function(e,n){return e[t+Object(c["D"])(n)]=a(),e}),{})}var u=function(t){return[].concat(l,["baseline","stretch"]).includes(t)},h=d("align",(function(){return{type:String,default:null,validator:u}})),g=function(t){return[].concat(l,["space-between","space-around"]).includes(t)},v=d("justify",(function(){return{type:String,default:null,validator:g}})),m=function(t){return[].concat(l,["space-between","space-around","stretch"]).includes(t)},f=d("alignContent",(function(){return{type:String,default:null,validator:m}})),b={align:Object.keys(h),justify:Object.keys(v),alignContent:Object.keys(f)},p={align:"align",justify:"justify",alignContent:"align-content"};function _(t,a,e){var n=p[t];if(null!=e){if(a){var i=a.replace(t,"");n+="-".concat(i)}return n+="-".concat(e),n.toLowerCase()}}var y=new Map;a["a"]=o["a"].extend({name:"v-row",functional:!0,props:Object(i["a"])(Object(i["a"])(Object(i["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:u}},h),{},{justify:{type:String,default:null,validator:g}},v),{},{alignContent:{type:String,default:null,validator:m}},f),render:function(t,a){var e=a.props,i=a.data,o=a.children,c="";for(var s in e)c+=String(e[s]);var l=y.get(c);return l||function(){var t,a;for(a in l=[],b)b[a].forEach((function(t){var n=e[t],i=_(a,t,n);i&&l.push(i)}));l.push((t={"no-gutters":e.noGutters,"row--dense":e.dense},Object(n["a"])(t,"align-".concat(e.align),e.align),Object(n["a"])(t,"justify-".concat(e.justify),e.justify),Object(n["a"])(t,"align-content-".concat(e.alignContent),e.alignContent),t)),y.set(c,l)}(),t(e.tag,Object(r["a"])(i,{staticClass:"row",class:l}),o)}})},"8c26":function(t,a,e){},"93ed":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-container",{staticStyle:{"padding-top":"75px"},attrs:{id:"manage_warranty",fluid:"",tag:"section"}},[e("base-material-card",{staticClass:"px-5 py-3",staticStyle:{"margin-top":"20px"},attrs:{icon:"mdi-clipboard-text",title:"Danh sách phiếu bảo hành"}},[t.userLogin&&t.userLogin["role"]&&"Admin"===t.userLogin["role"]?e("v-btn",{staticClass:"mx-0",staticStyle:{position:"absolute",right:"40px",top:"15px"},attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(a){return a.stopPropagation(),t.showTimKiem(a)}}},[e("v-icon",{attrs:{dark:""}},[t._v(" mdi-magnify ")])],1):t._e(),t.showAdvanceSearch?e("v-card-text",[e("v-row",[e("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[e("v-text-field",{attrs:{label:"Mã thẻ bảo hành",outlined:"",placeholder:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.advanceSearchData.codeNumber,callback:function(a){t.$set(t.advanceSearchData,"codeNumber",a)},expression:"advanceSearchData.codeNumber"}})],1),e("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[e("v-text-field",{attrs:{label:"Số điện thoại khách hàng",outlined:"",placeholder:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.advanceSearchData.customerTelNo,callback:function(a){t.$set(t.advanceSearchData,"customerTelNo",a)},expression:"advanceSearchData.customerTelNo"}})],1),e("div",{},[e("v-btn",{staticClass:"mt-3 mx-3",attrs:{color:"success"},on:{click:function(a){return a.stopPropagation(),t.searchWarranty(a)}}},[e("v-icon",{attrs:{left:"",size:"22"}},[t._v(" mdi-magnify ")]),t._v(" Tìm kiếm ")],1)],1)],1)],1):t._e(),e("v-card-text",{class:"lg"!==t.breakpointName?"px-0":""},[e("div",{class:"xs"===t.breakpointName?"mb-3":"d-flex mb-3"},["xs"===t.breakpointName?e("div",{staticClass:"mr-auto pt-2 mb-3"},[t._v(" Tổng số: "),e("span",{staticStyle:{"font-weight":"bold",color:"green"}},[t._v(t._s(t.totalItem))]),t._v(" phiếu bảo hành ")]):e("span",{staticClass:"mr-auto pt-2"},[t._v(" Tổng số: "),e("span",{staticStyle:{"font-weight":"bold",color:"green"}},[t._v(t._s(t.totalItem))]),t._v(" phiếu bảo hành ")])]),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"hide-default-footer":"","no-data-text":"Không có phiếu bảo hành nào",loading:t.loadingData,"loading-text":"Đang tải... "},scopedSlots:t._u([{key:"item.index",fn:function(a){a.item;var n=a.index;return[e("span",[t._v(t._s(t.page*t.itemsPerPage-t.itemsPerPage+n+1))])]}},{key:"item.customerName",fn:function(a){var n=a.item;a.index;return[e("p",{staticClass:"mb-2"},[t._v(t._s(n.customerName))]),e("p",{staticClass:"mb-2",staticStyle:{color:"blue"}},[t._v(t._s(n.customerTelNo))])]}},{key:"item.branchName",fn:function(a){var n=a.item;a.index;return[e("p",{staticClass:"mb-2"},[t._v(t._s(n.branchName))]),e("p",{staticClass:"mb-2",staticStyle:{color:"blue"}},[t._v(t._s(n.branchTelNo))]),e("p",{staticClass:"mb-2",staticStyle:{color:"blue"}},[t._v(t._s(n.branchAddress))])]}},{key:"item.noithatProducts",fn:function(a){var n=a.item;a.index;return[t._l(n["noithatProducts"],(function(a,n){return e("div",{key:n},[e("p",{staticClass:"mb-2"},[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(n+1))]),t._v(". "+t._s(a.productName)+" - "+t._s(a.quycach)+" (sl. "),e("span",{staticStyle:{"font-weight":"bold",color:"blue"}},[t._v(t._s(a.soluong))]),t._v(")")])])})),n["noithatProducts"]&&n["noithatProducts"].length>0?e("p",{staticClass:"mb-2"},[e("span",{staticClass:"font-weight-bold"},[t._v("Thời gian bảo hành:")]),e("span",[t._v(" Từ ngày ")]),t._v(" "),e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v(t._s(n["noiThatMfgDateLocal"]))]),t._v(" đến ngày "),e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v(" "+t._s(n["noiThatExpDateLocal"]))])]):t._e()]}},{key:"item.ngoaithatProducts",fn:function(a){var n=a.item;a.index;return[t._l(n["ngoaithatProducts"],(function(a,n){return e("div",{key:n},[e("p",{staticClass:"mb-2"},[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(n+1))]),t._v(". "+t._s(a.productName)+" - "+t._s(a.quycach)+" (sl. "),e("span",{staticStyle:{"font-weight":"bold",color:"blue"}},[t._v(t._s(a.soluong))]),t._v(")")])])})),n["ngoaithatProducts"]&&n["ngoaithatProducts"].length>0?e("p",{staticClass:"mb-2"},[e("span",{staticClass:"font-weight-bold"},[t._v("Thời gian bảo hành:")]),e("span",[t._v(" Từ ngày ")]),t._v(" "),e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v(t._s(n["ngoaiThatMfgDateLocal"]))]),t._v(" đến ngày "),e("span",{staticStyle:{color:"blue","font-weight":"bold"}},[t._v(" "+t._s(n["ngoaiThatExpDateLocal"]))])]):t._e()]}}])}),t.pageCount?e("div",{staticClass:"text-center mt-4"},[e("nav",{attrs:{role:"navigation","aria-label":"Pagination Navigation"}},[e("ul",{staticClass:"v-pagination theme--light"},[e("li",[e("button",{class:1==t.page?"v-pagination__navigation v-pagination__navigation--disabled":"v-pagination__navigation",attrs:{type:"button","aria-label":"Previous page"},on:{click:t.prevPage}},[e("i",{staticClass:"v-icon notranslate mdi mdi-chevron-left theme--light",attrs:{"aria-hidden":"true"}})])]),e("li",[e("button",{staticClass:"v-pagination__item v-pagination__item--active primary",attrs:{type:"button","aria-current":"true"}},[t._v(" "+t._s(t.page)+" ")])]),e("li",[e("button",{class:t.page==t.pageCount?"v-pagination__navigation v-pagination__navigation--disabled":"v-pagination__navigation",attrs:{type:"button","aria-label":"Next page"},on:{click:t.nextPage}},[e("i",{staticClass:"v-icon notranslate mdi mdi-chevron-right theme--light",attrs:{"aria-hidden":"true"}})])])])])]):t._e()],1)],1)],1)],1)},i=[],o=(e("159b"),e("ac1f"),e("1276"),{name:"Warranty",data:function(){return{loading:!1,loadingData:!1,dialogAddMember:!1,totalItem:0,page:1,pageCount:0,itemsPerPage:10,typeAction:"",userUpdate:"",items:[],headers:[{sortable:!1,text:"STT",align:"center",value:"index"},{sortable:!1,text:"Mã thẻ bảo hành",align:"left",value:"codeNumber"},{sortable:!1,text:"Tên khách hàng",align:"left",value:"customerName"},{sortable:!1,text:"Địa chỉ công trình",align:"left",value:"customerAddress"},{sortable:!1,text:"Đại lý bán hàng",align:"left",value:"branchName"},{sortable:!1,text:"Ngày kích hoạt",align:"left",value:"createDateLocal"},{sortable:!1,text:"Nội thất",align:"left",value:"noithatProducts"},{sortable:!1,text:"Ngoại thất",align:"left",value:"ngoaithatProducts"}],advanceSearchData:{codeNumber:"",customerTelNo:"",branchUid:"",fromCreateDate:"",toCreateDate:""},listDaiLy:[],dailySelected:"",showAdvanceSearch:!1,lastVisible:"",firstVisible:""}},created:function(){var t=this;t.getCounter(),t.getWarranty()},computed:{breakpointName:function(){return this.$store.getters.getBreakpointName},userLogin:function(){return this.$store.getters.getPermistion}},methods:{getCounter:function(){var t=this,a=db.collection("counters").doc("counterWarranty");a.collection("shards").get().then((function(a){var e=0,n=0;a.forEach((function(t){e+=t.data().count})),e&&t.itemsPerPage&&(n=Math.ceil(e/t.itemsPerPage)),t.totalItem=e,t.pageCount=n,console.log("pagination",e,n)}))},getWarranty:function(){var t=this;t.loadingData=!0,db.collection("warranty").orderBy("createDate").limit(t.itemsPerPage).get().then((function(a){t.loadingData=!1,t.lastVisible=a.docs[a.docs.length-1];var e=[];a.size?(a.docs.forEach((function(t){e.push(t.data())})),t.items=e):t.items=[]})).catch((function(){t.loadingData=!1}))},prevPage:function(){var t=this;t.loadingData=!0,t.page-=1,db.collection("warranty").orderBy("createDate").endBefore(t.firstVisible).limit(t.itemsPerPage).get().then((function(a){t.loadingData=!1,t.lastVisible=a.docs[a.docs.length-1];var e=[];a.size?(a.docs.forEach((function(t){e.push(t.data())})),t.items=e):t.items=[]})).catch((function(){t.loadingData=!1}))},nextPage:function(){var t=this;t.loadingData=!0,t.page+=1,db.collection("warranty").orderBy("createDate").startAfter(t.lastVisible).limit(t.itemsPerPage).get().then((function(a){t.loadingData=!1,t.firstVisible=a.docs[0];var e=[];a.size?(a.docs.forEach((function(t){e.push(t.data())})),t.items=e):t.items=[]})).catch((function(){t.loadingData=!1}))},addMember:function(t,a){var e=this;e.typeAction=t,e.userUpdate=a,e.dialogAddMember=!0,"add"===t?setTimeout((function(){e.account="",e.passWord="",e.userName="",e.telNo="",e.address="",e.$refs.formAddMember.resetValidation()}),200):setTimeout((function(){e.account=a.account,e.userName=a.userName,e.telNo=a.telNo,e.address=a.address,e.$refs.formAddMember.resetValidation()}),200)},getBranchs:function(){var t=this;db.collection("users").get().then((function(a){var e=[];a.size?(a.docs.forEach((function(t){e.push(t.data())})),t.listDaiLy=e):t.listDaiLy=[]})).catch((function(){}))},updateStatusUser:function(t,a){var e=this;e.userUpdate=a},showTimKiem:function(){var t=this;t.showAdvanceSearch=!t.showAdvanceSearch,t.listDaiLy&&0!==t.listDaiLy.length||t.getBranchs()},searchWarranty:function(){var t=this;t.loadingData=!0;var a="",e="";t.advanceSearchData["codeNumber"]&&(a="codeNumber",e=t.advanceSearchData["codeNumber"]),t.advanceSearchData["customerTelNo"]&&!t.advanceSearchData["codeNumber"]&&(a="customerTelNo",e=t.advanceSearchData["customerTelNo"]),!t.dailySelected||t.advanceSearchData["codeNumber"]||t.advanceSearchData["customerTelNo"]||(a="branchUid",e=t.dailySelected["uid"]);var n=db.collection("warranty").where(a,"==",e);if(e?e=String(e):n=db.collection("warranty"),t.advanceSearchData["fromCreateDate"]&&t.advanceSearchData["toCreateDate"]){var i=t.advanceSearchData["fromCreateDate"].split("/"),o=t.advanceSearchData["toCreateDate"].split("/"),r=new Date(i[2]+"-"+i[1]+"-"+i[0]).getTime(),c=new Date(o[2]+"-"+o[1]+"-"+o[0]).getTime();n=db.collection("warranty").where(a,"==",e).where("fromCreateDate",">=",r).where("toCreateDate","<=",c)}else if(t.advanceSearchData["fromCreateDate"]&&!t.advanceSearchData["toCreateDate"]){var s=t.advanceSearchData["fromCreateDate"].split("/"),l=new Date(s[2]+"-"+s[1]+"-"+s[0]).getTime();n=db.collection("warranty").where(a,"==",e).where("fromCreateDate",">=",l)}else if(!t.advanceSearchData["fromCreateDate"]&&t.advanceSearchData["toCreateDate"]){var d=t.advanceSearchData["toCreateDate"].split("/"),u=new Date(d[2]+"-"+d[1]+"-"+d[0]).getTime();n=db.collection("warranty").where(a,"==",e).where("toCreateDate","<=",u)}console.log("keySearch",a,e),n.get().then((function(a){t.loadingData=!1,console.log("itemSearchXXXX",a.size);var e=[];a.size?(console.log("itemSearch123",a.size),a.docs.forEach((function(t){e.push(t.data())})),t.items=e,t.totalItem=a.size,t.pageCount=Math.ceil(a.size/t.itemsPerPage),console.log("itemSearch",t.items,t.totalItem)):(t.items=[],t.totalItem=0)})).catch((function(){t.loadingData=!1,t.items=[],t.totalItem=0}))}}}),r=o,c=(e("069d"),e("2877")),s=e("6544"),l=e.n(s),d=e("8336"),u=e("99d9"),h=e("62ad"),g=e("a523"),v=e("8fea"),m=e("132d"),f=e("0fd9"),b=e("8654"),p=Object(c["a"])(r,n,i,!1,null,"6c542319",null);a["default"]=p.exports;l()(p,{VBtn:d["a"],VCardText:u["b"],VCol:h["a"],VContainer:g["a"],VDataTable:v["a"],VIcon:m["a"],VRow:f["a"],VTextField:b["a"]})}}]);
//# sourceMappingURL=chunk-7eca2afa.c4009d46.js.map