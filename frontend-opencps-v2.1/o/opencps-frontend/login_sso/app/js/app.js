(function(t){function e(e){for(var a,o,c=e[0],s=e[1],u=e[2],p=0,d=[];p<c.length;p++)o=c[p],i[o]&&d.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},o={app:0},i={app:0},r=[];function c(t){return s.p+"../../docs/o/opencps-frontend-cli/login_sso/app/js/"+({HoanThienBoSungHoSoDetail:"HoanThienBoSungHoSoDetail",Landing:"Landing",TiepNhanHoSoDetail:"TiepNhanHoSoDetail"}[t]||t)+".js"}function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={TiepNhanHoSoDetail:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var a="../../docs/o/opencps-frontend-cli/login_sso/app/css/"+({HoanThienBoSungHoSoDetail:"HoanThienBoSungHoSoDetail",Landing:"Landing",TiepNhanHoSoDetail:"TiepNhanHoSoDetail"}[t]||t)+".css",i=s.p+a,r=document.getElementsByTagName("link"),c=0;c<r.length;c++){var u=r[c],p=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(p===a||p===i))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],p=u.getAttribute("data-href");if(p===a||p===i)return e()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=e,l.onerror=function(e){var a=e&&e.target&&e.target.src||i,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.request=a,delete o[t],l.parentNode.removeChild(l),n(r)},l.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(l)})).then((function(){o[t]=0})));var a=i[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=r);var u,p=document.createElement("script");p.charset="utf-8",p.timeout=120,s.nc&&p.setAttribute("nonce",s.nc),p.src=c(t),u=function(e){p.onerror=p.onload=null,clearTimeout(d);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+a+": "+o+")");r.type=a,r.request=o,n[1](r)}i[t]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:p})}),12e4);p.onerror=p.onload=u,document.head.appendChild(p)}return Promise.all(e)},s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],p=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var l=p;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("0f18");var a=n("a026"),o=n("bb71");n("74ef");a["a"].use(o["a"],{theme:{primary:"#001f4d",secondary:"#424242",accent:"#001f4d",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},customProperties:!0,iconfont:"md"});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app_login_sso"}},[t._e(),n("v-content",[n("router-view")],1)],1)},r=[],c={data:function(){return{}},computed:{currentIndex:function(){return this.$store.getters.index}},created:function(){var t=this;t.$nextTick((function(){var e=t.$router.history.current;e.query}))},watch:{$route:function(t,e){t.params,t.query}},methods:{}},s=c,u=n("2877"),p=n("6544"),d=n.n(p),l=n("7496"),h=n("549c"),g=n("f774"),f=Object(u["a"])(s,i,r,!1,null,null,null);f.options.__file="App.vue";var m=f.exports;d()(f,{VApp:l["a"],VContent:h["a"],VNavigationDrawer:g["a"]});var v=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{staticClass:"text-xs-center",attrs:{xs12:"","mt-5":""}},[n("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1)],1)],1)},y=[],D={},I=D,x=n("a523"),b=n("0e8f"),L=n("a722"),C=n("490a"),k=Object(u["a"])(I,w,y,!1,null,null,null);k.options.__file="NotFound.vue";var _=k.exports;d()(k,{VContainer:x["a"],VFlex:b["a"],VLayout:L["a"],VProgressCircular:C["a"]});var S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-dialog",{staticClass:"my-0",staticStyle:{width:"100%","max-height":"100%"},attrs:{persistent:"","max-width":"1200px"},model:{value:t.dialog_loginDVCQG,callback:function(e){t.dialog_loginDVCQG=e},expression:"dialog_loginDVCQG"}},[n("v-card",[n("v-card-text",{staticClass:"px-0 py-0"},[n("iframe",{staticStyle:{width:"100%",height:"650px",border:"none"},attrs:{id:"iframeLoginDVCQG",src:t.tempDVCQG}})])],1)],1)],1)},T=[],N=(n("1157"),n("bbd0"),n("854a")),A=n.n(N);a["a"].use(A.a),A.a.options={closeButton:!0,timeOut:"5000"};var P={props:[],components:{},data:function(){return{dialog_loginDVCQG:!1,tempDVCQG:"",configUrl:""}},computed:{},created:function(){var t=this;t.$nextTick((function(){var t=this;try{t.configUrl=configSso}catch(e){}t.$nextTick((function(){t.$router.history.current,t.$router.history.current.query;window.callback_dvcqg=t.callback_dvcqg,t.checkVNConect()}))}))},updated:function(){var t=this;t.$nextTick((function(){}))},mounted:function(){},watch:{$route:function(t,e){t.params,t.query}},methods:{checkVNConect:function(){var t=this,e=(t.$router.history.current,t.$router.history.current.query,{state:"auth"});t.$store.dispatch("getVNConect",e).then((function(e){e&&(t.dialog_loginDVCQG=!0,setTimeout((function(){t.tempDVCQG=e}),200))})).catch((function(){}))},callback_dvcqg:function(t){var e=this;e.$router.history.current;"0"!==String(t["userId"])&&(window.location.href=window.themeDisplay.getLayoutURL(),window.location.reload(),e.dialog_loginDVCQG=!1)}}},V=P,j=n("b0af"),R=n("99d9"),U=n("169a"),H=Object(u["a"])(V,S,T,!1,null,null,null);H.options.__file="Landing.vue";var E=H.exports;d()(H,{VCard:j["a"],VCardText:R["a"],VDialog:U["a"]});var $=[{path:"/",name:"LandingRegister",component:E,props:!1},{path:"/danh-sach-ho-so/:index",name:"Landing",component:function(){return n.e("Landing").then(n.bind(null,"306c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/tiep-nhan-ho-so/:id/:formCode",name:"TiepNhanHoSoDetail",component:function(){return n.e("TiepNhanHoSoDetail").then(n.bind(null,"d129"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/bo-sung-ho-so/:id",name:"HoanThienBoSungHoSoDetail",component:function(){return n.e("HoanThienBoSungHoSoDetail").then(n.bind(null,"a35c"))},props:!0,meta:{requiresAuth:!1}},{path:"/danh-sach-ho-so/:index/ho-so/:id/:formCode",name:"DetailForward",component:DetailForward,props:!0},{path:"*",name:"NotFound",component:_}];a["a"].use(v["a"]);var O=new v["a"]({routes:$}),F=O,G=n("2f62"),q=n("bc3a"),B=n.n(q);a["a"].use(A.a),a["a"].use(G["a"]),A.a.options={closeButton:!0,timeOut:"5000"};var M=new G["a"].Store({state:{initData:{},loading:!1,index:0,agencyList:[],domainList:[],levelList:[]},actions:{loadInitResource:function(t){t.commit;var e=t.state;return new Promise((function(t,n){null!==window.themeDisplay&&void 0!==window.themeDisplay?(e.initData["groupId"]=window.themeDisplay.getScopeGroupId(),e.initData["user"]={userName:window.themeDisplay.getUserName(),userEmail:"",userId:window.themeDisplay.getUserId()}):(e.initData["groupId"]=0,e.initData["user"]={userName:"",userEmail:"",userId:20103}),t(e.initData)}))},makeImageCapLogin:function(t){t.commit;var e=t.state;return new Promise((function(t,n){var a={headers:{groupId:e.initData.groupId?e.initData.groupId:"",Accept:"application/json"},responseType:"blob"},o="/o/v1/opencps/users/login/jcaptcha";B.a.get(o,a).then((function(e){var n=window.URL.createObjectURL(e.data);t(n)})).catch((function(t){n(t)}))}))},makeImageCap:function(t){t.commit;var e=t.state;return new Promise((function(t,n){var a={headers:{groupId:e.initData.groupId?e.initData.groupId:"",Accept:"application/json"},responseType:"blob"},o="/o/rest/v2/applicants/jcaptcha";B.a.get(o,a).then((function(e){var n=window.URL.createObjectURL(e.data);t(n)})).catch((function(t){n(t)}))}))},checkApplicantInfos:function(t,e){t.commit;var n=t.state;return new Promise((function(t,a){var o={headers:{groupId:n.initData.groupId?n.initData.groupId:"",Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},i="/o/rest/v2/applicants/ngsp/verify",r=new URLSearchParams;r.append("applicantIdNo",e.applicantIdNo?e.applicantIdNo:""),r.append("applicantName",e.applicantName?e.applicantName:""),B.a.post(i,r,o).then((function(e){t(e.data)})).catch((function(t){a(t)}))}))},getApplicantInfos:function(t,e){t.commit;var n=t.state;return new Promise((function(t,a){var o={headers:{groupId:n.initData.groupId}};B.a.get("/o/rest/v2/applicants/ngsp/"+e.applicantIdNo,o).then((function(e){e.data&&e.data["Data"]&&t(e.data["Data"])})).catch((function(t){console.log(t),a(t)}))}))},goToDangNhap:function(t,e){var n=t.commit;t.state;M.dispatch("loadInitResource").then((function(t){var a={headers:{Authorization:"BASIC "+window.btoa(e["npmreactlogin_login"]+":"+e["npmreactlogin_password"])}},o=new URLSearchParams;n("setLoading",!0),B.a.post("/o/v1/opencps/login",o,a).then((function(t){if(n("setLoading",!1),""!==t.data&&"ok"!==t.data)"pending"===t.data?window.location.href=window.themeDisplay.getURLHome()+"/register#/xac-thuc-tai-khoan?active_user_id="+window.themeDisplay.getUserId()+"&redirectURL="+window.themeDisplay.getURLHome():window.location.href=t.data;else if("ok"===t.data){var e=window.themeDisplay.getSiteAdminURL().split("/~/")[0].replace("group","web");window.location.href=e+"/dich-vu-cong"}else"captcha"===t.data?A.a.error("Nhập sai mã Captcha.",{autoClose:2e3}):A.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.",{autoClose:2e3})})).catch((function(t){n("setLoading",!1),A.a.error("Tên đăng nhập hoặc mật khẩu không chính xác.",{autoClose:2e3})}))}))},postApplicant:function(t,e){t.commit;var n=t.state;return new Promise((function(t,a){n.initData.groupId;M.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:n.initData.groupId,Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}},r=new URLSearchParams;r.append("applicantIdType",e.applicantType),r.append("applicantName",e.applicantName),r.append("applicantIdNo",e.applicantIdNo),r.append("applicantIdDate",e.applicantIdNoDate),r.append("contactEmail",e.contactEmail),r.append("contactTelNo",e.contactTelNo),r.append("password",e.password),r.append("j_captcha_response",e.j_captcha_response),console.log("dataPostApplicant",r),B.a.post("/o/rest/v2/applicants/withcaptcha",r,i).then((function(e){void 0!==e["status"]&&203===e["status"]?(A.a.clear(),A.a.error("Mã captcha không chính xác"),a(xhr)):t(e.data),A.a.success("Đăng ký thành công"),t(e.data)})).catch((function(t,e){var n;a(t),console.log("response",t.response),t.response.data&&(n=t.response.data,n&&n.description&&"DuplicateContactEmailException"===n.description?A.a.error("Đăng ký thất bại. Email sử dụng đã tồn tại trên hệ thống. Sử dụng Email khác để đăng ký"):n&&n.description&&"DuplicateApplicantIdException"===n.description?A.a.error("Đăng ký thất bại. Số CMDN/Mã số thuế đã tồn tại trên hệ thống. Sử dụng số CMDN/mã số thuế khác để đăng ký"):n&&n.description&&"DuplicateContactTelNoException"===n.description?A.a.error("Đăng ký thất bại. Số điện thoại đã được sử dụng trên hệ thống. Sử dụng số điện thoại khác để đăng ký"):n&&n.description&&"Invalid ID, could not validate unexisting or already validated captcha"===n.description?A.a.error("Nhập sai Captcha"):A.a.error("Đăng ký thất bại. Vui lòng thử lại "+n.description))}))}))}))},getDieuKhoan:function(t,e){t.commit;var n=t.state;return new Promise((function(t,e){M.dispatch("loadInitResource").then((function(a){var o={headers:{groupId:n.initData.groupId}};B.a.get("/o/v1/opencps/jexcel/backend.datamgt.service/org.opencps.datamgt.model.DictCollection/org.opencps.datamgt.service.DictCollectionLocalServiceUtil/collectionCode/dataForm",o).then((function(e){if(e.data){var n,a=e.data;if(Array.isArray(a)&&a.length>0){var o=a.filter((function(t){return"PRIVACY"===t.id}));n=o&&o.length>0?o[0].name:""}t(n)}else t("")})).catch((function(t){console.log(t),e(t)}))}))}))},confirmPIN:function(t,e){t.commit;var n=t.state;return new Promise((function(t,a){M.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:n.initData.groupId}};B.a.get("/o/rest/v2/applicants/"+e.userId+"/activate/"+e.pinCode,i).then((function(e){t(e.data),A.a.success("Xác thực thành công")})).catch((function(t){a(t),A.a.error("Mã pin không chính xác. Vui lòng kiểm tra lại")}))}))}))},confirmForgotPASS:function(t,e){t.commit;var n=t.state;return new Promise((function(t,a){M.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:n.initData.groupId}};B.a.get("/o/rest/v2/users/"+e.confirmCode+"/forgot?j_captcha_response="+e["j_captcha_response"],i).then((function(e){void 0!==e["status"]&&203===e["status"]?(A.a.clear(),A.a.error("Nhập sai mã Captcha"),a(xhr)):e.data["userId"]?t(e.data):(A.a.clear(),A.a.error("Tài khoản không tồn tại trên hệ thống"),a(xhr))})).catch((function(t){a(t)}))}))}))},confirmCodeForgotPass:function(t,e){t.commit;var n=t.state;return new Promise((function(t,a){M.dispatch("loadInitResource").then((function(o){var i={headers:{groupId:n.initData.groupId}};B.a.get("/o/rest/v2/users/"+e.userCode+"/forgot/confirm/"+e.confirmCode+"?j_captcha_response="+e["j_captcha_response"],i).then((function(e){t(e.data),void 0!==e["status"]&&203===e["status"]?(A.a.clear(),A.a.error("Mã captcha không chính xác. Vui lòng nhập lại."),a(xhr)):(t(e.data),A.a.clear(),A.a.success("Xác thực thành công. Vui lòng kiểm tra email hoặc số điện thoại để có mật khẩu mới"),setTimeout((function(){var t=window.themeDisplay.getLayoutRelativeURL().substring(0,window.themeDisplay.getLayoutRelativeURL().lastIndexOf("/"));window.open(t,"_self")}),500))})).catch((function(t){var e=t.response;void 0!==e["status"]&&403===e["status"]&&(A.a.clear(),A.a.error("Mã bảo mật không chính xác. Vui lòng kiểm tra lại.")),a(t)}))}))}))}},mutations:{setLoading:function(t,e){t.loading=e},setInitData:function(t,e){t.initData=e},setAgencyList:function(t,e){t.agencyList=e},setDomainList:function(t,e){t.domainList=e},setLevelList:function(t,e){t.levelList=e}},getters:{loading:function(t){return t.loading},index:function(t){return t.index},getAgencyList:function(t){return t.agencyList},getDomainList:function(t){return t.domainList},getLevelList:function(t){return t.levelList}}}),Q=(n("d304"),void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0);B.a.defaults.withCredentials=!0,B.a.defaults.headers.common["Token"]=void 0!==window.Liferay?window.Liferay.authToken:"",B.a.defaults.headers.common["groupId"]=Q,a["a"].config.productionTip=!0,a["a"].mixin({methods:{getScopeGroupId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getScopeGroupId():0},getAuthToken:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.Liferay.authToken:""},getUserId:function(){return null!==window.themeDisplay&&void 0!==window.themeDisplay?window.themeDisplay.getUserId():0}}}),new a["a"]({router:F,store:M,render:function(t){return t(m)}}).$mount("#app_login_sso")},"74ef":function(t,e,n){},bbd0:function(t){t.exports={}}});
//# sourceMappingURL=app.js.map