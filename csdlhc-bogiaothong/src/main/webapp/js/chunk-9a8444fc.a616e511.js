(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a8444fc"],{"0e8f":function(t,e,i){"use strict";i("20f6");var a=i("e8f2");e["a"]=Object(a["a"])("flex")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"206d":function(t,e,i){"use strict";i("4413")},"20f6":function(t,e,i){},"3c93":function(t,e,i){},4413:function(t,e,i){},"4bd4":function(t,e,i){"use strict";var a=i("5530"),n=(i("caad"),i("2532"),i("07ac"),i("4de4"),i("159b"),i("7db0"),i("58df")),o=i("7e2b"),r=i("3206");e["a"]=Object(n["a"])(o["a"],Object(r["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},a={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?a.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(t._uid)||(a.valid=i(t)))})):a.valid=i(t),a},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(a["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"841c":function(t,e,i){"use strict";var a=i("d784"),n=i("825a"),o=i("1d80"),r=i("129f"),s=i("577e"),c=i("dc4a"),l=i("14c3");a("search",(function(t,e,i){return[function(e){var i=o(this),a=void 0==e?void 0:c(e,t);return a?a.call(e,i):new RegExp(e)[t](s(i))},function(t){var a=n(this),o=s(t),c=i(e,a,o);if(c.done)return c.value;var u=a.lastIndex;r(u,0)||(a.lastIndex=0);var d=l(a,o);return r(a.lastIndex,u)||(a.lastIndex=u),null===d?-1:d.index}]}))},a523:function(t,e,i){"use strict";i("4de4"),i("b64b"),i("2ca0"),i("99af"),i("20f6"),i("4b85");var a=i("e8f2"),n=i("d9f7");e["a"]=Object(a["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var i,a=e.props,o=e.data,r=e.children,s=o.attrs;return s&&(o.attrs={},i=Object.keys(s).filter((function(t){if("slot"===t)return!1;var e=s[t];return t.startsWith("data-")?(o.attrs[t]=e,!1):e||"string"===typeof e}))),a.id&&(o.domProps=o.domProps||{},o.domProps.id=a.id),t(a.tag,Object(n["a"])(o,{staticClass:"container",class:Array({"container--fluid":a.fluid}).concat(i||[])}),r)}})},a55b:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap-login"},[i("v-container",{staticClass:"px-0 pt-0",attrs:{id:"login-page",fluid:"",tag:"section"}},[i("div",{staticClass:"container-wrap"},[i("div",{staticClass:"wrap-title"},[i("div",{staticClass:"text-1"},[t._v("HỆ THỐNG XÁC THỰC TÀI KHOẢN")]),i("div",{staticClass:"text-1"},[t._v("CÔNG DÂN DOANH NGHIỆP")]),i("div",{staticClass:"text-1 text-1-1"},[t._v(t._s(t.titleLogin))])]),t.signed?t._e():i("div",{staticClass:"wrap-form"},[i("div",[i("v-form",{ref:"form",staticClass:"mt-2",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-flex",{staticClass:"mt-6 text-xs-center ",attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text",attrs:{color:"#940404",loading:t.loading,disabled:t.loading},on:{click:t.loginKeyCloak}},[i("v-icon",{attrs:{size:"20"}},[t._v("mdi-account-key-outline")]),t._v("  Đăng nhập hệ thống ")],1)],1)],1)],1)]),t.signed?i("div",{staticClass:"wrap-form"},[i("div",{staticClass:"text-login"},[t._v("TÀI KHOẢN ĐÃ ĐĂNG NHẬP HỆ THỐNG")]),i("v-flex",{staticClass:"mt-6 text-xs-center ",attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text mr-3",attrs:{color:"#940404",loading:t.loading,disabled:t.loading},on:{click:t.submitLogout}},[i("div",{staticClass:"v-btn__content"},[i("v-icon",{attrs:{size:"18"}},[t._v("mdi-logout-variant")]),t._v("  "),i("span",[t._v("Đăng xuất")])],1)]),i("v-btn",{staticClass:"my-0 white--text",attrs:{color:"#940404",loading:t.loading,disabled:t.loading},on:{click:t.submitConfirmLogin}},[i("v-icon",{attrs:{size:"20"}},[t._v("mdi-home-circle-outline")]),t._v("  "),i("span",[t._v("Truy cập hệ thống")])],1)],1)],1):t._e()])]),i("img",{staticClass:"img-login-logo",attrs:{src:t.publicPath+"/images/image-login.png"}}),i("div",{staticClass:"text-center"},[i("v-overlay",{attrs:{value:t.overlay}},[i("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)},n=[],o=(i("ac1f"),i("841c"),i("5319"),i("1276"),i("4de4"),i("2b0e")),r=i("bc3a"),s=i.n(r),c=i("854a"),l=i.n(c);l.a.options={closeButton:!0,timeOut:"5000",positionClass:"toast-top-center"};var u={name:"Login",data:function(){return{titleLogin:"Tỉnh Hậu Giang",publicPath:"",apiSso:"https://apigateway.haugiang.gov.vn",overlay:!1,loading:!1,valid:!0,userName:"",password:"",client_secret:"",code:"",signed:!1}},created:function(){var t=this,e="",i=window.location.search.substring(1);if(i){var a=o["default"].$cookies.get("Token");e=JSON.parse('{"'+decodeURI(i).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),!a&&e&&e["code"]&&(t.overlay=!0,t.code=e["code"],t.getToken())}o["default"].$cookies.get("Token")?t.signed=!0:t.signed=!1},computed:{},methods:{submitConfirmLogin:function(){var t=this;t.$router.push({path:"/danh-muc"})},loginKeyCloak:function(){var t=this;if(!t.loading){t.loading=!0;var e={uri:"https://quantritaikhoan.haugiang.gov.vn/index.html"};t.$store.dispatch("loginKeyCloak",e).then((function(e){t.loading=!1,e&&(window.location.href=e.endpoint)})).catch((function(e){t.loading=!1}))}},getToken:function(){var t=this;t.loading=!1;var e={code:t.code,redirect_uri:"https://quantritaikhoan.haugiang.gov.vn/index.html"};alert("code",t.code),t.$store.dispatch("getTokenKeyCloak",e).then((function(e){if(t.loading=!1,t.overlay=!1,e.access_token)try{var i=JSON.parse(atob(e.access_token.split(".")[1])),a=i.scope.split(" "),n="";try{n=i.realm_access.roles}catch(u){}var o=n.filter((function(t){return"site-admin"===t})),r=a.filter((function(t){return"site-admin"===t}));if(r&&r.length&&o&&o.length){t.$cookies.set("Token",e.access_token,e.expires_in),t.$cookies.set("RefreshToken",e.refresh_token,e.refresh_expires_in),s.a.defaults.headers["Authorization"]="Bearer "+e.access_token;var c={role_name:"",user_id:""};localStorage.setItem("user",JSON.stringify(c)),t.$store.commit("SET_ISSIGNED",!0),window.location.href=window.location.origin+window.location.pathname+"#/danh-muc"}else t.loading=!1,t.overlay=!1,l.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),t.submitLogout()}catch(u){t.loading=!1,t.overlay=!1,l.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),t.submitLogout()}})).catch((function(e){t.loading=!1,t.overlay=!1,l.a.error("Đăng nhập không thành công")}))},submitLogout:function(){var t=this;t.signed=!1,t.$store.commit("SET_ISSIGNED",!1),localStorage.setItem("user",null),t.$cookies.set("Token",""),t.$cookies.set("RefreshToken",""),t.$store.dispatch("logoutKeyCloak").then((function(t){var e="https://quantritaikhoan.haugiang.gov.vn/index.html";window.location.href=t.endpoint+"?redirect_uri="+e})).catch((function(){window.location.href=window.location.origin+window.location.pathname+"#/login"}))},getPassword:function(){}}},d=u,f=(i("206d"),i("2877")),h=i("6544"),v=i.n(h),g=i("8336"),p=i("a523"),m=i("0e8f"),b=i("4bd4"),y=i("132d"),_=i("a797"),w=i("490a"),C=Object(f["a"])(d,a,n,!1,null,null,null);e["default"]=C.exports;v()(C,{VBtn:g["a"],VContainer:p["a"],VFlex:m["a"],VForm:b["a"],VIcon:y["a"],VOverlay:_["a"],VProgressCircular:w["a"]})},a797:function(t,e,i){"use strict";var a=i("5530"),n=(i("a9e3"),i("3c93"),i("a9ad")),o=i("7560"),r=i("f2e7"),s=i("58df");e["a"]=Object(s["a"])(n["a"],o["a"],r["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim:function(){var t=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",t)},classes:function(){return Object(a["a"])({"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive},this.themeClasses)},computedOpacity:function(){return Number(this.isActive?this.opacity:0)},styles:function(){return{zIndex:this.zIndex}}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render:function(t){var e=[this.__scrim];return this.isActive&&e.push(this.genContent()),t("div",{staticClass:"v-overlay",class:this.classes,style:this.styles},e)}})},e8f2:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("498a"),i("99af"),i("4de4"),i("b64b"),i("2ca0"),i("a15b");var a=i("2b0e");function n(t){return a["default"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,i){var a=i.props,n=i.data,o=i.children;n.staticClass="".concat(t," ").concat(n.staticClass||"").trim();var r=n.attrs;if(r){n.attrs={};var s=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(n.attrs[t]=e,!1):e||"string"===typeof e}));s.length&&(n.staticClass+=" ".concat(s.join(" ")))}return a.id&&(n.domProps=n.domProps||{},n.domProps.id=a.id),e(a.tag,n,o)}})}}}]);