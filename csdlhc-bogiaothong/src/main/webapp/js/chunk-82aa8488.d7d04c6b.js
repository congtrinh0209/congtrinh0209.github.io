(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-82aa8488"],{"0e8f":function(t,e,i){"use strict";i("20f6");var n=i("e8f2");e["a"]=Object(n["a"])("flex")},"206d":function(t,e,i){"use strict";i("4413")},"20f6":function(t,e,i){},4413:function(t,e,i){},"4bd4":function(t,e,i){"use strict";var n=i("5530"),a=(i("caad"),i("2532"),i("07ac"),i("4de4"),i("d3b7"),i("159b"),i("7db0"),i("58df")),o=i("7e2b"),s=i("3206");e["a"]=Object(a["a"])(o["a"],Object(s["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,i=function(t){return t.$watch("hasError",(function(i){e.$set(e.errorBag,t._uid,i)}),{immediate:!0})},n={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?n.shouldValidate=t.$watch("shouldValidate",(function(a){a&&(e.errorBag.hasOwnProperty(t._uid)||(n.valid=i(t)))})):n.valid=i(t),n},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var i=this.watchers.find((function(t){return t._uid===e._uid}));i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(n["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"841c":function(t,e,i){"use strict";var n=i("c65b"),a=i("d784"),o=i("825a"),s=i("1d80"),r=i("129f"),l=i("577e"),c=i("dc4a"),d=i("14c3");a("search",(function(t,e,i){return[function(e){var i=s(this),a=void 0==e?void 0:c(e,t);return a?n(a,e,i):new RegExp(e)[t](l(i))},function(t){var n=o(this),a=l(t),s=i(e,n,a);if(s.done)return s.value;var c=n.lastIndex;r(c,0)||(n.lastIndex=0);var u=d(n,a);return r(n.lastIndex,c)||(n.lastIndex=c),null===u?-1:u.index}]}))},a523:function(t,e,i){"use strict";i("4de4"),i("d3b7"),i("b64b"),i("2ca0"),i("99af"),i("20f6"),i("4b85");var n=i("e8f2"),a=i("d9f7");e["a"]=Object(n["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var i,n=e.props,o=e.data,s=e.children,r=o.attrs;return r&&(o.attrs={},i=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(o.attrs[t]=e,!1):e||"string"===typeof e}))),n.id&&(o.domProps=o.domProps||{},o.domProps.id=n.id),t(n.tag,Object(a["a"])(o,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(i||[])}),s)}})},a55b:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap-login"},[i("v-container",{staticClass:"px-0 pt-0",attrs:{id:"login-page",fluid:"",tag:"section"}},[i("div",{staticClass:"wrap-title"},[i("v-flex",[i("img",{staticClass:"img-login-logo",attrs:{src:t.publicPath+"/images/logo-login.png?t=931413"}})]),i("v-flex",{staticClass:"pt-1"},[i("div",{staticClass:"text-1"},[t._v("CƠ SỞ DỮ LIỆU HÀNH CHÍNH")]),i("div",{staticClass:"text-2"},[t._v("BỘ GIAO THÔNG VẬN TẢI")])])],1),i("div",{staticClass:"container-wrap"},[t.signed?t._e():i("div",[i("div",{staticClass:"text-title"},[i("span",[t._v("ĐĂNG NHẬP")])]),i("div",{staticClass:"hr-line"}),i("div",{staticClass:"wrap-form"},[i("v-form",{ref:"form",staticClass:"mt-2",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-flex",{attrs:{xs12:""}},[i("div",{staticClass:"label-text"},[t._v("Tên đăng nhập")]),i("v-text-field",{staticClass:"input-text",attrs:{dense:"",flat:"",placeholder:"Nhập tên đăng nhập",rules:[function(t){return!!t||"Tên đăng nhập là bắt buộc"}],required:"","prepend-inner-icon":"mdi-account","hide-details":"auto",outlined:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginKeyCloak.apply(null,arguments)}},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),i("v-flex",{staticStyle:{"margin-top":"30px"},attrs:{xs12:""}},[i("div",{staticClass:"label-text"},[t._v("Mật khẩu")]),i("v-text-field",{staticClass:"input-text",attrs:{dense:"",outlined:"",placeholder:"Nhập mật khẩu",type:"password",rules:[function(t){return!!t||"Mật khẩu là bắt buộc"}],required:"","prepend-inner-icon":"mdi-key","hide-details":"auto"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginKeyCloak.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("v-flex",{staticClass:"wrap-btn-login",attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text btn-login",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.loginKeyCloak}},[t._v(" Đăng nhập ")])],1)],1)],1)]),t.signed?i("div",[i("div",{staticClass:"text-title"},[i("span",[t._v("ĐĂNG NHẬP")])]),i("div",{staticClass:"hr-line"}),i("div",{staticClass:"wrap-form"},[i("div",{staticClass:"text-login"},[t._v("TÀI KHOẢN ĐÃ ĐĂNG NHẬP HỆ THỐNG")]),i("v-flex",{staticStyle:{"margin-top":"32px","text-align":"center"},attrs:{xs12:""}},[i("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{loading:t.loading,disabled:t.loading},on:{click:t.submitLogout}},[i("div",{staticClass:"v-btn__content"},[i("v-icon",{attrs:{size:"18"}},[t._v("mdi-logout-variant")]),t._v("  "),i("span",[t._v("Đăng xuất")])],1)]),i("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{loading:t.loading,disabled:t.loading},on:{click:t.goToPage}},[i("v-icon",{attrs:{size:"20"}},[t._v("mdi-home-circle-outline")]),t._v("  "),i("span",[t._v("Truy cập hệ thống")])],1)],1)],1)]):t._e()])])],1)},a=[],o=(i("ac1f"),i("841c"),i("5319"),i("2b0e")),s=i("bc3a"),r=i.n(s),l=i("854a"),c=i.n(l);c.a.options={closeButton:!0,timeOut:"5000",positionClass:"toast-top-center"};var d={name:"Login",data:function(){return{titleLogin:"Bộ Giao thông vận tải",publicPath:"",apiSso:"http://119.17.200.69:19904",overlay:!1,loading:!1,valid:!0,userName:"",password:"",client_secret:"",code:"",signed:!1}},created:function(){var t=this,e="",i=window.location.search.substring(1);if(i){var n=o["a"].$cookies.get("Token");e=JSON.parse('{"'+decodeURI(i).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),!n&&e&&e["code"]&&(t.overlay=!0,t.code=e["code"])}o["a"].$cookies.get("Token")?t.signed=!0:t.signed=!1},computed:{},methods:{submitConfirmLogin:function(){var t=this;t.$router.push({path:"/don-vi"})},loginKeyCloak:function(){var t=this;if(!t.loading){t.loading=!0;var e={uri:"http://119.17.200.69:19981/index.html"};t.$store.dispatch("loginKeyCloak",e).then((function(e){t.loading=!1,e&&(window.location.href=e.endpoint)})).catch((function(e){t.loading=!1}))}},getToken:function(){var t=this;t.loading=!1;var e={code:t.code,redirect_uri:"http://119.17.200.69:19981/index.html"};t.$store.dispatch("getTokenKeyCloak",e).then((function(e){if(t.loading=!1,t.overlay=!1,e.access_token)try{t.$cookies.set("Token",e.access_token,e.expires_in),t.$cookies.set("RefreshToken",e.refresh_token,e.refresh_expires_in),r.a.defaults.headers["Authorization"]="Bearer "+e.access_token,t.$store.commit("SET_ISSIGNED",!0),window.location.href=window.location.origin+window.location.pathname+"#/don-vi"}catch(i){t.loading=!1,t.overlay=!1,c.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),t.submitLogout()}})).catch((function(e){t.loading=!1,t.overlay=!1,c.a.error("Đăng nhập không thành công")}))},submitLogout:function(){var t=this;t.signed=!1,t.$store.commit("SET_ISSIGNED",!1),localStorage.setItem("user",null),t.$cookies.set("Token",""),t.$cookies.set("RefreshToken","");window.location.href="https://idp.fds.vn/realms/mtdata-dev/protocol/openid-connect/logout"},getPassword:function(){}}},u=d,f=(i("206d"),i("2877")),p=i("6544"),h=i.n(p),v=i("8336"),g=i("a523"),m=i("0e8f"),b=i("4bd4"),x=i("132d"),k=i("8654"),y=Object(f["a"])(u,n,a,!1,null,null,null);e["default"]=y.exports;h()(y,{VBtn:v["a"],VContainer:g["a"],VFlex:m["a"],VForm:b["a"],VIcon:x["a"],VTextField:k["a"]})},e8f2:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("498a"),i("99af"),i("4de4"),i("d3b7"),i("b64b"),i("2ca0"),i("a15b");var n=i("2b0e");function a(t){return n["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,i){var n=i.props,a=i.data,o=i.children;a.staticClass="".concat(t," ").concat(a.staticClass||"").trim();var s=a.attrs;if(s){a.attrs={};var r=Object.keys(s).filter((function(t){if("slot"===t)return!1;var e=s[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}));r.length&&(a.staticClass+=" ".concat(r.join(" ")))}return n.id&&(a.domProps=a.domProps||{},a.domProps.id=n.id),e(n.tag,a,o)}})}}}]);