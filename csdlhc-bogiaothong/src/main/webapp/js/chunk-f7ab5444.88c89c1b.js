(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7ab5444"],{"0e8f":function(t,e,n){"use strict";n("20f6");var r=n("e8f2");e["a"]=Object(r["a"])("flex")},"0eb6":function(t,e,n){"use strict";var r=n("23e7"),i=n("7c37"),a=n("d066"),o=n("d039"),s=n("7c73"),c=n("5c6c"),d=n("9bf2").f,l=n("cb2d"),u=n("edd0"),f=n("1a2d"),p=n("19aa"),h=n("825a"),v=n("aa1f"),g=n("e391"),m=n("cf98"),E=n("c770"),_=n("69f3"),b=n("83ab"),R=n("c430"),C="DOMException",x="DATA_CLONE_ERR",y=a("Error"),w=a(C)||function(){try{var t=a("MessageChannel")||i("worker_threads").MessageChannel;(new t).port1.postMessage(new WeakMap)}catch(e){if(e.name==x&&25==e.code)return e.constructor}}(),N=w&&w.prototype,k=y.prototype,T=_.set,I=_.getterFor(C),O="stack"in y(C),S=function(t){return f(m,t)&&m[t].m?m[t].c:0},A=function(){p(this,D);var t=arguments.length,e=g(t<1?void 0:arguments[0]),n=g(t<2?void 0:arguments[1],"Error"),r=S(n);if(T(this,{type:C,name:n,message:e,code:r}),b||(this.name=n,this.message=e,this.code=r),O){var i=y(e);i.name=C,d(this,"stack",c(1,E(i.stack,1)))}},D=A.prototype=s(k),M=function(t){return{enumerable:!0,configurable:!0,get:t}},H=function(t){return M((function(){return I(this)[t]}))};b&&(u(D,"code",H("code")),u(D,"message",H("message")),u(D,"name",H("name"))),d(D,"constructor",c(1,A));var L=o((function(){return!(new w instanceof y)})),V=L||o((function(){return k.toString!==v||"2: 1"!==String(new w(1,2))})),B=L||o((function(){return 25!==new w(1,"DataCloneError").code})),$=L||25!==w[x]||25!==N[x],P=R?V||B||$:L;r({global:!0,constructor:!0,forced:P},{DOMException:P?A:w});var G=a(C),U=G.prototype;for(var j in V&&(R||w===G)&&l(U,"toString",v),B&&b&&w===G&&u(U,"code",M((function(){return S(h(this).name)}))),m)if(f(m,j)){var z=m[j],K=z.s,F=c(6,z.c);f(G,K)||d(G,K,F),f(U,K)||d(U,K,F)}},"206d":function(t,e,n){"use strict";n("4413")},"20f6":function(t,e,n){},4413:function(t,e,n){},"4bd4":function(t,e,n){"use strict";var r=n("5530"),i=(n("caad"),n("2532"),n("07ac"),n("4de4"),n("d3b7"),n("159b"),n("7db0"),n("58df")),a=n("7e2b"),o=n("3206");e["a"]=Object(i["a"])(a["a"],Object(o["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,n=function(t){return t.$watch("hasError",(function(n){e.$set(e.errorBag,t._uid,n)}),{immediate:!0})},r={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=t.$watch("shouldValidate",(function(i){i&&(e.errorBag.hasOwnProperty(t._uid)||(r.valid=n(t)))})):r.valid=n(t),r},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var n=this.watchers.find((function(t){return t._uid===e._uid}));n&&(n.valid(),n.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(r["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},"7c37":function(t,e,n){var r=n("605d");t.exports=function(t){try{if(r)return Function('return require("'+t+'")')()}catch(e){}}},"81b2":function(t,e,n){var r=n("23e7"),i=n("d066"),a=n("e330"),o=n("d039"),s=n("577e"),c=n("1a2d"),d=n("d6d6"),l=n("b917").ctoi,u=/[^\d+/a-z]/i,f=/[\t\n\f\r ]+/g,p=/[=]+$/,h=i("atob"),v=String.fromCharCode,g=a("".charAt),m=a("".replace),E=a(u.exec),_=o((function(){return""!==h(" ")})),b=!o((function(){h("a")})),R=!_&&!b&&!o((function(){h()})),C=!_&&!b&&1!==h.length;r({global:!0,enumerable:!0,forced:_||b||R||C},{atob:function(t){if(d(arguments.length,1),R||C)return h(t);var e,n,r=m(s(t),f,""),a="",o=0,_=0;if(r.length%4==0&&(r=m(r,p,"")),r.length%4==1||E(u,r))throw new(i("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(e=g(r,o++))c(l,e)&&(n=_%4?64*n+l[e]:l[e],_++%4&&(a+=v(255&n>>(-2*_&6))));return a}})},"841c":function(t,e,n){"use strict";var r=n("c65b"),i=n("d784"),a=n("825a"),o=n("1d80"),s=n("129f"),c=n("577e"),d=n("dc4a"),l=n("14c3");i("search",(function(t,e,n){return[function(e){var n=o(this),i=void 0==e?void 0:d(e,t);return i?r(i,e,n):new RegExp(e)[t](c(n))},function(t){var r=a(this),i=c(t),o=n(e,r,i);if(o.done)return o.value;var d=r.lastIndex;s(d,0)||(r.lastIndex=0);var u=l(r,i);return s(r.lastIndex,d)||(r.lastIndex=d),null===u?-1:u.index}]}))},"8bd4":function(t,e,n){var r=n("d066"),i=n("d44e"),a="DOMException";i(r(a),a)},a523:function(t,e,n){"use strict";n("4de4"),n("d3b7"),n("b64b"),n("2ca0"),n("99af"),n("20f6"),n("4b85");var r=n("e8f2"),i=n("d9f7");e["a"]=Object(r["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var n,r=e.props,a=e.data,o=e.children,s=a.attrs;return s&&(a.attrs={},n=Object.keys(s).filter((function(t){if("slot"===t)return!1;var e=s[t];return t.startsWith("data-")?(a.attrs[t]=e,!1):e||"string"===typeof e}))),r.id&&(a.domProps=a.domProps||{},a.domProps.id=r.id),t(r.tag,Object(i["a"])(a,{staticClass:"container",class:Array({"container--fluid":r.fluid}).concat(n||[])}),o)}})},a55b:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap-login"},[n("v-container",{staticClass:"px-0 pt-0",attrs:{id:"login-page",fluid:"",tag:"section"}},[n("div",{staticClass:"wrap-title"},[n("v-flex",[n("img",{staticClass:"img-login-logo",attrs:{src:t.publicPath+"/images/logo-login.png?t=931413"}})]),n("v-flex",{staticClass:"pt-1"},[n("div",{staticClass:"text-1"},[t._v("CƠ SỞ DỮ LIỆU HÀNH CHÍNH")]),n("div",{staticClass:"text-2"},[t._v("BỘ GIAO THÔNG VẬN TẢI")])])],1),n("div",{staticClass:"container-wrap"},[t.signed?t._e():n("div",[n("div",{staticClass:"text-title"},[n("span",[t._v("ĐĂNG NHẬP")])]),n("div",{staticClass:"hr-line"}),n("div",{staticClass:"wrap-form"},[n("v-form",{ref:"form",staticClass:"mt-2",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"label-text"},[t._v("Tên đăng nhập")]),n("v-text-field",{staticClass:"input-text",attrs:{dense:"",flat:"",placeholder:"Nhập tên đăng nhập",rules:[function(t){return!!t||"Tên đăng nhập là bắt buộc"}],required:"","prepend-inner-icon":"mdi-account","hide-details":"auto",outlined:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitConfirmLogin.apply(null,arguments)}},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),n("v-flex",{staticStyle:{"margin-top":"30px"},attrs:{xs12:""}},[n("div",{staticClass:"label-text"},[t._v("Mật khẩu")]),n("v-text-field",{staticClass:"input-text",attrs:{dense:"",outlined:"",placeholder:"Nhập mật khẩu",type:"password",rules:[function(t){return!!t||"Mật khẩu là bắt buộc"}],required:"","prepend-inner-icon":"mdi-key","hide-details":"auto"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitConfirmLogin.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-flex",{staticClass:"wrap-btn-login",attrs:{xs12:""}},[n("v-btn",{staticClass:"my-0 white--text btn-login",attrs:{loading:t.loading,disabled:t.loading},on:{click:t.submitConfirmLogin}},[t._v(" Đăng nhập ")])],1)],1)],1)]),t.signed?n("div",[n("div",{staticClass:"text-title"},[n("span",[t._v("ĐĂNG NHẬP")])]),n("div",{staticClass:"hr-line"}),n("div",{staticClass:"wrap-form"},[n("div",{staticClass:"text-login"},[t._v("TÀI KHOẢN ĐÃ ĐĂNG NHẬP HỆ THỐNG")]),n("v-flex",{staticStyle:{"margin-top":"32px","text-align":"center"},attrs:{xs12:""}},[n("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{loading:t.loading,disabled:t.loading},on:{click:t.submitLogout}},[n("div",{staticClass:"v-btn__content"},[n("v-icon",{attrs:{size:"18"}},[t._v("mdi-logout-variant")]),t._v("  "),n("span",[t._v("Đăng xuất")])],1)]),n("v-btn",{staticClass:"my-0 white--text mr-3 btn-login",staticStyle:{padding:"0 15px !important"},attrs:{loading:t.loading,disabled:t.loading},on:{click:t.goToPage}},[n("v-icon",{attrs:{size:"20"}},[t._v("mdi-home-circle-outline")]),t._v("  "),n("span",[t._v("Truy cập hệ thống")])],1)],1)],1)]):t._e()])])],1)},i=[],a=(n("ac1f"),n("841c"),n("5319"),n("81b2"),n("0eb6"),n("b7ef"),n("8bd4"),n("1276"),n("4de4"),n("d3b7"),n("e9c4"),n("2b0e")),o=n("bc3a"),s=n.n(o),c=n("854a"),d=n.n(c);d.a.options={closeButton:!0,timeOut:"5000",positionClass:"toast-top-center"};var l={name:"Login",data:function(){return{titleLogin:"Bộ Giao thông vận tải",publicPath:"",apiSso:"http://119.17.200.69:19904",overlay:!1,loading:!1,valid:!0,userName:"",password:"",client_secret:"",code:"",signed:!1}},created:function(){var t=this,e="",n=window.location.search.substring(1);if(n){var r=a["a"].$cookies.get("Token");e=JSON.parse('{"'+decodeURI(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'),!r&&e&&e["code"]&&(t.overlay=!0,t.code=e["code"],t.getToken())}a["a"].$cookies.get("Token")?t.signed=!0:t.signed=!1},computed:{},methods:{submitConfirmLogin:function(){var t=this;t.$router.push({path:"/don-vi"})},loginKeyCloak:function(){var t=this;if(!t.loading){t.loading=!0;var e={uri:"http://119.17.200.69:19981/index.html"};t.$store.dispatch("loginKeyCloak",e).then((function(e){t.loading=!1,e&&(window.location.href=e.endpoint)})).catch((function(e){t.loading=!1}))}},getToken:function(){var t=this;t.loading=!1;var e={code:t.code,redirect_uri:"http://119.17.200.69:19981/index.html"};alert("code",t.code),t.$store.dispatch("getTokenKeyCloak",e).then((function(e){if(t.loading=!1,t.overlay=!1,e.access_token)try{var n=JSON.parse(atob(e.access_token.split(".")[1])),r=n.scope.split(" "),i="";try{i=n.realm_access.roles}catch(l){}var a=i.filter((function(t){return"site-admin"===t})),o=r.filter((function(t){return"site-admin"===t}));if(o&&o.length&&a&&a.length){t.$cookies.set("Token",e.access_token,e.expires_in),t.$cookies.set("RefreshToken",e.refresh_token,e.refresh_expires_in),s.a.defaults.headers["Authorization"]="Bearer "+e.access_token;var c={role_name:"",user_id:""};localStorage.setItem("user",JSON.stringify(c)),t.$store.commit("SET_ISSIGNED",!0),window.location.href=window.location.origin+window.location.pathname+"#/don-vi"}else t.loading=!1,t.overlay=!1,d.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),t.submitLogout()}catch(l){t.loading=!1,t.overlay=!1,d.a.error("TÀI KHOẢN KHÔNG CÓ TRÊN HỆ THỐNG"),t.submitLogout()}})).catch((function(e){t.loading=!1,t.overlay=!1,d.a.error("Đăng nhập không thành công")}))},submitLogout:function(){var t=this;t.signed=!1,t.$store.commit("SET_ISSIGNED",!1),localStorage.setItem("user",null),t.$cookies.set("Token",""),t.$cookies.set("RefreshToken",""),t.$store.dispatch("logoutKeyCloak").then((function(t){var e="http://119.17.200.69:19981/index.html";window.location.href=t.endpoint+"?redirect_uri="+e})).catch((function(){window.location.href=window.location.origin+window.location.pathname+"#/login"}))},getPassword:function(){}}},u=l,f=(n("206d"),n("2877")),p=n("6544"),h=n.n(p),v=n("8336"),g=n("a523"),m=n("0e8f"),E=n("4bd4"),_=n("132d"),b=n("8654"),R=Object(f["a"])(u,r,i,!1,null,null,null);e["default"]=R.exports;h()(R,{VBtn:v["a"],VContainer:g["a"],VFlex:m["a"],VForm:E["a"],VIcon:_["a"],VTextField:b["a"]})},aa1f:function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),a=n("825a"),o=n("7c73"),s=n("e391"),c=Error.prototype.toString,d=i((function(){if(r){var t=o(Object.defineProperty({},"name",{get:function(){return this===t}}));if("true"!==c.call(t))return!0}return"2: 1"!==c.call({message:1,name:2})||"Error"!==c.call({})}));t.exports=d?function(){var t=a(this),e=s(t.name,"Error"),n=s(t.message);return e?n?e+": "+n:e:n}:c},b7ef:function(t,e,n){"use strict";var r=n("23e7"),i=n("d066"),a=n("5c6c"),o=n("9bf2").f,s=n("1a2d"),c=n("19aa"),d=n("7156"),l=n("e391"),u=n("cf98"),f=n("c770"),p=n("c430"),h="DOMException",v=i("Error"),g=i(h),m=function(){c(this,E);var t=arguments.length,e=l(t<1?void 0:arguments[0]),n=l(t<2?void 0:arguments[1],"Error"),r=new g(e,n),i=v(e);return i.name=h,o(r,"stack",a(1,f(i.stack,1))),d(r,this,m),r},E=m.prototype=g.prototype,_="stack"in v(h),b="stack"in new g(1,2),R=_&&!b;r({global:!0,constructor:!0,forced:p||R},{DOMException:R?m:g});var C=i(h),x=C.prototype;if(x.constructor!==C)for(var y in p||o(x,"constructor",a(1,C)),u)if(s(u,y)){var w=u[y],N=w.s;s(C,N)||o(C,N,a(6,w.c))}},b917:function(t,e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r={},i=0;i<66;i++)r[n.charAt(i)]=i;t.exports={itoc:n,ctoi:r}},cf98:function(t,e){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},e8f2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("498a"),n("99af"),n("4de4"),n("d3b7"),n("b64b"),n("2ca0"),n("a15b");var r=n("2b0e");function i(t){return r["a"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,n){var r=n.props,i=n.data,a=n.children;i.staticClass="".concat(t," ").concat(i.staticClass||"").trim();var o=i.attrs;if(o){i.attrs={};var s=Object.keys(o).filter((function(t){if("slot"===t)return!1;var e=o[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}));s.length&&(i.staticClass+=" ".concat(s.join(" ")))}return r.id&&(i.domProps=i.domProps||{},i.domProps.id=r.id),e(r.tag,i,a)}})}}}]);